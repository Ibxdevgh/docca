<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOCCA</title>
    <script type="module" crossorigin src="./assets/index-BndqmWBH.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-B9torgA4.css">
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Inject Terms and Privacy Policy links into the apply modal
      (function() {
        const processedElements = new WeakSet();
        
        function injectPolicyLinks() {
          // Find text nodes containing "agree to our terms and privacy policy"
          const walker = document.createTreeWalker(
            document.body,
            NodeFilter.SHOW_TEXT,
            null,
            false
          );
          
          const textNodes = [];
          let node;
          while (node = walker.nextNode()) {
            const text = node.textContent;
            // Look for the pattern "agree to our terms and privacy policy"
            if (text && /agree.*(to|with).*our.*terms.*(and|&).*privacy/i.test(text)) {
              const parent = node.parentElement;
              // Skip if already processed or already has links
              if (!processedElements.has(parent) && !parent.querySelector('a[href*="terms"], a[href*="privacy"]')) {
                textNodes.push({ textNode: node, parent: parent });
              }
            }
          }
          
          textNodes.forEach(({ textNode, parent }) => {
            const fullText = textNode.textContent;
            // Match: "By applying, you agree to our terms and privacy policy"
            // We want to match the entire phrase and replace it completely
            // Pattern: (everything before) (agree to our terms and privacy policy) (everything after)
            const match = fullText.match(/(.*?)(agree\s+(to|with)\s+our\s+terms\s+(and|&)\s+privacy\s+policy)(.*)/i);
            
            if (match) {
              const beforeText = match[1];
              const afterText = match[4]; // Text after the entire phrase
              
              // Clean up afterText - remove any duplicate "privacy policy", "terms", or "and"
              let cleanAfterText = afterText || '';
              cleanAfterText = cleanAfterText.trim();
              
              // Remove "and" if it appears at the start
              if (cleanAfterText.toLowerCase().startsWith('and')) {
                cleanAfterText = cleanAfterText.substring(3).trim();
              }
              
              // Remove any duplicate "privacy policy" or "terms" that might be in afterText
              cleanAfterText = cleanAfterText.replace(/\b(privacy\s+policy|terms(\s+of\s+use)?)\b/gi, '').trim();
              
              // Create document fragment with proper structure
              const fragment = document.createDocumentFragment();
              
              // Add text before "agree"
              if (beforeText) {
                fragment.appendChild(document.createTextNode(beforeText));
              }
              
              // Add "agree to our "
              fragment.appendChild(document.createTextNode('agree to our '));
              
              // Create Terms of Use link
              const termsLink = document.createElement('a');
              termsLink.href = '/terms-of-use.html';
              termsLink.textContent = 'Terms of Use';
              termsLink.style.color = 'rgb(167, 139, 250)';
              termsLink.style.textDecoration = 'underline';
              termsLink.style.transition = 'color 0.2s';
              termsLink.onmouseover = () => termsLink.style.color = 'rgb(192, 132, 252)';
              termsLink.onmouseout = () => termsLink.style.color = 'rgb(167, 139, 250)';
              fragment.appendChild(termsLink);
              
              // Add " and "
              fragment.appendChild(document.createTextNode(' and '));
              
              // Create Privacy Policy link
              const privacyLink = document.createElement('a');
              privacyLink.href = '/privacy-policy.html';
              privacyLink.textContent = 'Privacy Policy';
              privacyLink.style.color = 'rgb(167, 139, 250)';
              privacyLink.style.textDecoration = 'underline';
              privacyLink.style.transition = 'color 0.2s';
              privacyLink.onmouseover = () => privacyLink.style.color = 'rgb(192, 132, 252)';
              privacyLink.onmouseout = () => privacyLink.style.color = 'rgb(167, 139, 250)';
              fragment.appendChild(privacyLink);
              
              // Only add afterText if it doesn't contain policy-related terms
              if (cleanAfterText && !cleanAfterText.match(/\b(privacy|policy|terms)\b/i)) {
                fragment.appendChild(document.createTextNode(cleanAfterText));
              }
              
              // Replace the text node with the fragment
              parent.replaceChild(fragment, textNode);
              processedElements.add(parent);
            }
          });
        }
        
        // Use MutationObserver to watch for DOM changes (React hydration)
        const observer = new MutationObserver(() => {
          injectPolicyLinks();
        });
        
        
        // Start observing
        observer.observe(document.body, {
          childList: true,
          subtree: true,
          characterData: true
        });
        
        // Initial attempts
        injectPolicyLinks();
        
        // Try after delays for React hydration
        setTimeout(injectPolicyLinks, 500);
        setTimeout(injectPolicyLinks, 1000);
        setTimeout(injectPolicyLinks, 2000);
        setTimeout(injectPolicyLinks, 3000);
        
        // Also try on DOMContentLoaded
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => {
            setTimeout(injectPolicyLinks, 500);
          });
        }
      })();
    </script>
  </body>
</html>
